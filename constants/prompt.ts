export const APP_CREATION_PROMPT = `
# پرامپت حرفه‌ای ساخت وب‌اپلیکیشن آفلاین «مدیریت مالی شخصی» (Single-File / Offline / RTL)

**نقش تو:** یک مهندس ارشد فرانت‌اند.

**هدف:** ساخت یک **وب‌اپلیکیشن تک‌صفحه‌ای و کاملاً آفلاین** برای مدیریت هزینه‌ها و درآمدهای شخصی. خروجی باید **فقط یک فایل HTML** باشد (HTML + CSS + Vanilla JS به‌صورت inline). **هیچ سرور یا دیتابیس خارجی** استفاده نشود. **داده‌ها فقط در \`localStorage\`** ذخیره شوند. رابط‌کاربری **RTL و فارسی**.

---

## محدودیت‌ها و الزامات فنی

*   **فایل واحد:** کل پروژه در یک فایل \`index.html\` با CSS و JS داخلی.
*   **کتابخانه‌ها:** استفاده از کتابخانه‌های خارجی ممنوع است. اگر به تاریخ شمسی نیاز است، یک **ماژول سبک تبدیل تاریخ شمسی** را **به‌صورت کد داخلی کوچک** پیاده‌سازی کن (مثلاً تبدیل گرگوری ⇄ جلالی + قالب‌بندی «YYYY/MM/DD» و نام روز هفته).
*   **ذخیره‌سازی:** فقط \`localStorage\`.
*   **زبان:** Persian (FA), اعداد سه‌رقمی جدا شوند. واحد نمایش **تومان**، واحد ذخیره‌سازی **ریال**.
*   **دسترس‌پذیری:** کنتراست مناسب، فوکوس‌استایل واضح، نقش‌های ARIA لازم.
*   **UI/UX:** مینیمال، مدرن، نرم، واکنش‌گرا؛ انیمیشن‌های ظریف (transition/transform)؛ پشتیبانی از تِم روشن/تاریک.

---

## داده و منطق

*   **کلیدهای localStorage**

    *   \`pfm.initialRealBalanceRial\` → عدد (ریال)
    *   \`pfm.transactions\` → آرایه تراکنش‌ها به JSON
    *   \`pfm.setupDone\` → بولین
*   **ساختار تراکنش**

\`\`\`js
{
  id: "unique_id",       // مثلا: \`tx_\${Date.now()}_\${rand}\`
  amount: 100000,          // به ریال ذخیره شود
  title: "خرید سوپرمارکت",
  type: "expense" | "income",
  date: "1404/05/22",     // جلالی (YYYY/MM/DD)
  time: "14:30"           // HH:mm
}
\`\`\`

*   **نمایش مبلغ:** همواره بر 10 تقسیم و به **تومان** با جداکننده هزار نمایش بده (مثلاً \`123,450\` تومان).
*   **محاسبه لحظه‌ای موجودی**

    *   **فرمول:**

        *   \`موجودی باقی‌مانده = موجودی اولیه واقعی - مجموع برداشت‌ها + مجموع واریزی‌ها\`
    *   با هر افزودن/حذف تراکنش، UI را فوری به‌روزرسانی کن.

---

## ویژگی‌ها

### 1) راه‌اندازی اولیه هوشمند (First-Run Setup)

یک ویزارد تک‌صفحه‌ای نمایش بده اگر \`pfm.setupDone\` وجود ندارد:

*   ورودی «**موجودی فعلی حساب بانکی**» (به تومان در UI، تبدیل به ریال برای ذخیره).
*   «**تراکنش‌های اخیر** که قبلاً در موجودی فعلی لحاظ شده‌اند»؛ امکان افزودن چند تراکنش با همان فرم تراکنش (type/title/amount/time/date).
*   هنگام اتمام ویزارد:

    *   \`sumRecent = مجموع تراکنش‌های اخیر (income - expense)\` **به ریال**.
    *   \`initialRealBalanceRial = currentBankBalanceRial + sumRecent\` را ذخیره کن.
    *   تمام تراکنش‌های اخیر را نیز در \`pfm.transactions\` ذخیره کن.
    *   \`pfm.setupDone = true\` و سپس وارد صفحه اصلی شو.
    *   هدف از این منطق: جلوگیری از دوباره‌شماری هزینه/درآمدهای اخیر.

### 2) فرم ورود تراکنش جدید

یک فرم سریع با فیلدهای زیر:

*   **مبلغ (ریال/تومان):** ورودی عددی؛ در UI تومان بگیر، به ریال ذخیره کن.
*   **عنوان:** متن آزاد (placeholder: «مثال: خرید از سوپرمارکت»).
*   **نوع:** رادیویی «برداشت (expense) / واریز (income)»؛ پیش‌فرض: expense.
*   **تاریخ:** انتخابگر تاریخ شمسی (پیش‌فرض: امروز جلالی).
*   **ساعت:** ورودی HH\\:mm با اعتبارسنجی.
*   **دکمه ثبت** با Enter-Submit.
*   اعتبارسنجی‌ها: اجباری بودن مبلغ و نوع، مثبت بودن مبلغ، قالب صحیح تاریخ/ساعت.

### 3) نمایش اطلاعات

*   **هدر موجودی نهایی:** در بالای صفحه، برجسته و خوانا (فونت درشت)، مقدار تومان + برچسب «موجودی باقی‌مانده».
*   **گروه‌بندی روزانه تراکنش‌ها:**

    *   مرتب‌سازی از جدیدترین به قدیمی‌ترین (date desc, time desc).
    *   گروه‌بندی بر اساس **روز**؛ برای هر گروه یک سرعنوان با **نام روز هفته** و **تاریخ کامل جلالی** (مثال: «چهارشنبه - ۱۴۰۴/۰۵/۲۲»).
    *   زیر هر روز، کارت/آیتم‌های تراکنش: عنوان، ساعت، **مبلغ به تومان** با علامت +/− بر اساس نوع، چیپ نوع (واریز/برداشت).
    *   **حذف تراکنش:** دکمه حذف (آیکون سطل) کنار هر آیتم؛ با تأیید کاربر. پس از حذف، \`localStorage\` و موجودی به‌روزرسانی شوند.

---

## اجزای UI پیشنهادی (SPA)

*   **App Header:** عنوان اپ + نمایش موجودی لحظه‌ای + سوییچ تِم.
*   **Quick Add Panel:** فرم افزودن تراکنش (collapsible در موبایل).
*   **Transactions List:** گروه‌بندی‌شده با Virtual Scroll ساده برای کارایی.
*   **Empty States:** برای زمان بدون تراکنش / نتایج جستجو.
*   **Toast/Alert سبک:** برای موفقیت/خطا.
*   **Footer:** لینک «بازتنظیم داده‌ها» (Reset) با اخطار؛ کلید Export/Import JSON.

---

## درخواست‌های جدید برای آپدیت

*   **بازنشانی (Reset):** قابلیت تنظیم مجدد برنامه هم بزار که از اول همه اطلاعات برنامه چیده بشه.
*   **انتخاب تاریخ و ساعت در ویزارد:** یه قابلیت بزار که برای تنظیم اولیه برنامه بتونم تاریخ تراکنش هارو هم انتخاب کنم و همینطور ساعت تراکنش.
*   **انتخابگر تاریخ جدید:** نحوه انتخاب تاریخ تقویم رو بزار مثل انتخاب تاریخ تولد ساخت اکانت جیمیل گوگل یعنی روی هر بخش کلیک میکنی یه drop down menu باز بشه که لیست تمام ماه ها لیست روز های ماه ها و لیست اعداد سال شمسی رو نشون داده و با انتخاب کردنشون تاریخ رو انتخاب کرده ام اینجوری!
*   **نمایش پرامپت:** یه بخشی هم توی برنامه خیلی کوچولو بزار که وقتی روش کلیک میشه متن پرامپت ساخت این برنامه رو نشون میده با ساختاری دقیق و حرف ای مثل همینی که به تو دادم به علاوه این فیکس جدیدی که برای تغییر برنامه بهت دادم.
`;
